# 概要设计规约

#### 修订历史:

修改或初始编写日期、 SEPG、 版本、 说明、 作者、 评审时间、 评审参与人员、 评审后修改批准日期、确认签字人员



## 一 引言 

### 1.1概要设计依据

### 1.2参考资料 

[1] RESTful API – Wiki : https://en.wikipedia.org/wiki/Representational_state_transfer

[2] Metirial Design : https://material.io/design/guidelines-overview/

### 1.3假定和约束 

## 二 概要设计

### 2.1系统总体架构设计 

本系统采用MVC为总体框架，其中视图层位于安卓手机端，控制层和模型层位于服务器端，力求实现用户界面和业务逻辑的分离，以增强代码的可扩展性和灵活性。前后端接口采用RESTful风格，服务端采用.Net Core平台Web Api框架，使用SqlSugar等ORM框架对MySQL数据库进行访问和操作。

![系统架构图](Diagrams/ArchitectureDiagrams/系统架构图.png)

#### 2.1.1基础设施层

本系统的基础设施层包括服务端和手机端硬件。其中手机端硬件主要是关于用户的手机摄像头，用户的手机摄像头是系统获取拍照图片功能的硬件基础。服务端基础设施包括服务器的网络连接，服务器及服务器的操作系统。以上的硬件设施为系统提供服务实现功能的最底层基础。

#### 2.1.2数据层及数据库层

本系统采用MySQL关系型数据库作为存储系统运行相关信息的工具。其快速灵活以及开源免费的特点十分适合本项目的性能与成本控制要求。

后端软件使用SqlSugar等ORM框架实现对象与数据库内容的映射以简化对数据库的访问和操作，并将事务管理等数据库操作封装起来以提高代码的灵活度和复用性。

#### 2.1.3业务层

业务层对应MVC架构中的模型层，实现了系统所有功能的业务逻辑。通过数据层提供的数据接口获取需要的数据，根据具体的功能需求按照相应业务逻辑进行处理然后将处理好的数据返回上层。并为控制层开放系统各功能的接口。

#### 2.1.4控制层

控制层是连接业务层和界面层的桥梁，其接受来自界面层的请求和相应的数据，并把这些操作请求传递给业务层以供其执行对应的业务功能操作，最终将业务层的处理结果或是查询到的信息返回给视图层。

#### 2.1.5应用层

应用层的任务是在控制层和界面层之间提供连接，其通过将Http请求进行封装，为界面层提供统一的接口访问形式，目的在于提高代码复用性降低耦合度，并且利用Retrofit框架的异步特性为界面层的交互提供更好的用户体验。

#### 2.1.6界面层

界面层对应MVC架构中的视图层，主要负责与用户的交互，包括接收用户的操作请求和输入，并将操作和数据通过应用层封装的接口传给控制层，收到数据返回之后将信息呈现给用户。

### 2.2系统软件结构设计

#### 2.2.1系统包图

![系统包图](Diagrams/ArchitectureDiagrams/系统包图.png)



##### 2.2.1.1 Data Access Package

该包负责数据的持久化存储，包括 MySQL 子系统和服务器运行平台的文件系统两部分。其中文件系统主要负责存储系统中所有多媒体内容，包括但不限于用户上传的衣物图片、穿搭图片等，以及对图片进行压缩时的本地缓存。MySQL 数据库负责对其余系统相关数据进行存储。

##### 2.2.1.2 ORM Package

ORM 包主要负责建立持久化存储数据和软件运行时数据对象间的映射，封装 MySQL 数据库相关操作并提供一体化高灵活度的数据操作方式。

##### 2.2.1.3 Model Package

该包包含一系列实体类以及各功能模块的控制类，实现了系统的核心业务逻辑，其接收来自 Controller 包中控制器的业务请求，使用 ORM 包封装的数据库操作接口处理数据并将处理结果返回给 Controller 包中的控制器。

##### 2.2.1.4 Controller Package

该包由各模块控制器组成，负责向 Http Service 包提供接口服务。其根据收到的服务请求创建对应的Model并将其操作结果返回给 Http Service 包。在整个业务流程中 Controller 包中的控制器只负责提供各功能模块的请求接口，并创建对应的Model然后将处理结果信息返回。

##### 2.2.1.5 Http Response Package

该包由一系列实体类组成，这些实体类定义了前端和后端发送信息的数据格式。

##### 2.2.1.6 Http Service Package

该包由一系列接口类组成，这些接口类定义了前端和后端之间的数据接口的参数和返回值类型格式，并通过Retrofit框架实现Http请求的发送和返回值解析。

##### 2.2.1.7 View Package

该包负责整个系统的页面展示，包含一系列安卓系统 Activity，Fragment 以及 Adapter，为数据的呈现和用户交互提供了支持，并且对用户输入数据进行了一些简单的合法性验证。

#### 2.2.2 类调用关系图

##### 2.2.2.1 用户模块

【图】

用户部分的类主要实现的系统功能为新用户的注册，用户信息验证以及获取用户推荐宝贝信息。

该部分包括两个界面类 Login Activity 和 Register Activity 负责接收用户的注册和登录输入数据信息，并进行一些简单的合法性验证，以及。

##### 2.2.2.2 衣橱管理模块

【图】

##### 2.2.2.3 衣物管理模块

【图】

##### 2.2.2.4 穿搭管理模块

【图】



### 2.3接口设计

#### 2.3.1类之间的接口

#### 2.3.2模块之间的接口

#### 2.3.3前后端之间的接口

### 2.4界面设计

### 2.5数据库设计

#### 2.5.1 实体设计

#### 2.5.2 实体属性

#### 2.5.3 文件系统存储设计

### 2.6系统出错处理设计

#### 2.6.1出错信息

#### 2.6.2补救措施

#### 2.6.3系统维护设计




